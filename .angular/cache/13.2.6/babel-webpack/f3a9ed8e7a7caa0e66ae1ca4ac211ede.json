{"ast":null,"code":"import { ShowingProductsModeEnum } from './model/ShowingProductsModeEnum';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./services/category.service\";\nimport * as i2 from \"./services/product.service\";\nimport * as i3 from \"./services/authentication.service\";\nimport * as i4 from \"./services/caddy.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\n\nfunction AppComponent_a_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 17);\n    i0.ɵɵtext(1, \"Produits \");\n    i0.ɵɵelement(2, \"span\", 18);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_li_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 6);\n    i0.ɵɵlistener(\"click\", function AppComponent_li_12_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.onNavigateToShowProductsByCategory(1);\n    });\n    i0.ɵɵtext(2, \"Produits par cat\\u00E9gorie\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AppComponent_li_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 6);\n    i0.ɵɵlistener(\"click\", function AppComponent_li_13_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.onNavigateToShowSelectedProducts();\n    });\n    i0.ɵɵtext(2, \"Produits s\\u00E9lectionn\\u00E9s\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AppComponent_li_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 6);\n    i0.ɵɵlistener(\"click\", function AppComponent_li_14_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.onNavigateToShowOnPromotionProducts();\n    });\n    i0.ɵɵtext(2, \"Produits en promo\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AppComponent_li_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 19);\n    i0.ɵɵtext(2, \"Chercher\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AppComponent_li_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 20);\n    i0.ɵɵtext(2, \"Ajouter\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AppComponent_li_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 7)(1, \"a\", 17);\n    i0.ɵɵtext(2, \"Cat\\u00E9gories \");\n    i0.ɵɵelement(3, \"span\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ul\", 9)(5, \"li\")(6, \"a\", 21);\n    i0.ɵɵtext(7, \"Chercher\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"li\")(9, \"a\", 22);\n    i0.ɵɵtext(10, \"Ajouter\");\n    i0.ɵɵelementEnd()()()();\n  }\n}\n\nfunction AppComponent_li_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 23);\n    i0.ɵɵtext(2, \"Panier\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AppComponent_li_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", (tmp_0_0 = ctx_r8.caddyService.getCurrentCaddy()) == null ? null : tmp_0_0.name, \"\\u00A0:\\u00A0\", (tmp_0_0 = ctx_r8.caddyService.getCurrentCaddy()) == null ? null : tmp_0_0.caddyItems == null ? null : tmp_0_0.caddyItems.size, \" \");\n  }\n}\n\nfunction AppComponent_span_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Bienvenu \", ctx_r9.getAuthenticatedUserUsername(), \"\\u00A0 \");\n  }\n}\n\nfunction AppComponent_div_25_ul_1_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 28)(1, \"span\", 29);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_25_ul_1_a_1_Template_span_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r21);\n      const category_r19 = restoredCtx.$implicit;\n      const ctx_r20 = i0.ɵɵnextContext(3);\n      return ctx_r20.onNavigateToShowProductsByCategory(category_r19.id);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const category_r19 = ctx.$implicit;\n    const ctx_r18 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"ngClass\", ctx_r18.clickedCategoryId == category_r19.id ? \"active\" : \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(category_r19.name);\n  }\n}\n\nfunction AppComponent_div_25_ul_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 26);\n    i0.ɵɵtemplate(1, AppComponent_div_25_ul_1_a_1_Template, 3, 2, \"a\", 27);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r17.categories._embedded.categories);\n  }\n}\n\nfunction AppComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtemplate(1, AppComponent_div_25_ul_1_Template, 2, 1, \"ul\", 25);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.categories);\n  }\n}\n\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(categoryService, productService, authenticationService, caddyService, router) {\n      this.categoryService = categoryService;\n      this.productService = productService;\n      this.authenticationService = authenticationService;\n      this.caddyService = caddyService;\n      this.router = router;\n      this._clickedCategoryId = 1;\n      this._showingMode = ShowingProductsModeEnum.FRONT_OFFICE;\n    }\n\n    ngOnInit() {\n      // pr eviter de se loger a chaque accès à l'app, on va charger jwtAuthToken du localStorage, \n      // le parser et init username+roles \n      this.authenticationService.parseJwtAuthTokenAndInitUsernameRoles(); // charger les categories\n\n      this.categoryService.getAllCategories().subscribe(response => {\n        console.log(response);\n        this._categories = response;\n      }, err => {\n        console.log(err);\n      });\n    }\n\n    onNavigateToShowSelectedProducts() {\n      this.showingMode = ShowingProductsModeEnum.FRONT_OFFICE;\n      this._clickedCategoryId = 0;\n      this.router.navigateByUrl(\"frontoffice-products-grid/\" + ShowingProductsModeEnum.BY_SELECTED_PRODUCTS + \"/\" + 0);\n    }\n\n    onNavigateToShowOnPromotionProducts() {\n      this.showingMode = ShowingProductsModeEnum.FRONT_OFFICE;\n      this._clickedCategoryId = 0;\n      this.router.navigateByUrl(\"frontoffice-products-grid/\" + ShowingProductsModeEnum.BY_PRODUCTS_ON_PROMOTION + \"/\" + 0);\n    }\n\n    onNavigateToShowProductsByCategory(categoryId) {\n      this.showingMode = ShowingProductsModeEnum.FRONT_OFFICE;\n      this.clickedCategoryId = categoryId;\n      this.router.navigateByUrl(\"frontoffice-products-grid/\" + ShowingProductsModeEnum.BY_CATEGORY + \"/\" + categoryId);\n    }\n\n    onLgout() {\n      this.authenticationService.logout();\n      this.caddyService.emptyCurrentCaddy();\n      this.router.navigateByUrl('/login');\n      console.log(\"onLogout()\");\n    }\n\n    isAdmin() {\n      return this.authenticationService.isAdmin();\n    }\n\n    isUser() {\n      return this.authenticationService.isUser();\n    }\n\n    isAuthenticated() {\n      return this.authenticationService.isAuthenticated();\n    }\n\n    getAuthenticatedUserUsername() {\n      return this.authenticationService.username;\n    }\n\n    get categories() {\n      return this._categories;\n    }\n\n    set categories(value) {\n      this._categories = value;\n    }\n\n    get clickedCategoryId() {\n      return this._clickedCategoryId;\n    }\n\n    set clickedCategoryId(value) {\n      this._clickedCategoryId = value;\n    }\n\n    get showingMode() {\n      return this._showingMode;\n    }\n\n    set showingMode(value) {\n      this._showingMode = value;\n    }\n\n  }\n\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.CategoryService), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i3.AuthenticationService), i0.ɵɵdirectiveInject(i4.CaddyService), i0.ɵɵdirectiveInject(i5.Router));\n  };\n\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    decls: 28,\n    vars: 13,\n    consts: [[1, \"navbar\", \"navbar-inverse\"], [1, \"container\"], [1, \"navbar-header\"], [\"href\", \"#\", 1, \"navbar-brand\"], [1, \"nav\", \"navbar-nav\"], [1, \"active\"], [1, \"_curseur\", 3, \"click\"], [1, \"dropdown\"], [\"class\", \"dropdown-toggle\", \"data-toggle\", \"dropdown\", \"href\", \"#\", 4, \"ngIf\"], [1, \"dropdown-menu\"], [4, \"ngIf\"], [\"class\", \"dropdown\", 4, \"ngIf\"], [1, \"nav\", \"navbar-nav\", \"pull-right\"], [1, \"btn\", 3, \"click\"], [3, \"title\", \"ngClass\"], [\"class\", \"col-md-3\", 4, \"ngIf\"], [1, \"col-md-9\"], [\"data-toggle\", \"dropdown\", \"href\", \"#\", 1, \"dropdown-toggle\"], [1, \"caret\"], [\"routerLink\", \"/products-grid\"], [\"routerLink\", \"/new-product\"], [\"routerLink\", \"/categories-grid\"], [\"routerLink\", \"/new-category\"], [\"routerLink\", \"/caddies\"], [1, \"col-md-3\"], [\"class\", \"list-group\", 4, \"ngIf\"], [1, \"list-group\"], [\"class\", \"list-group-item _curseur\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"list-group-item\", \"_curseur\", 3, \"ngClass\"], [3, \"click\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"nav\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"a\", 3);\n        i0.ɵɵtext(4, \"E-commerce\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"ul\", 4)(6, \"li\", 5)(7, \"a\", 6);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_a_click_7_listener() {\n          return ctx.onNavigateToShowSelectedProducts();\n        });\n        i0.ɵɵtext(8, \"Home\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"li\", 7);\n        i0.ɵɵtemplate(10, AppComponent_a_10_Template, 3, 0, \"a\", 8);\n        i0.ɵɵelementStart(11, \"ul\", 9);\n        i0.ɵɵtemplate(12, AppComponent_li_12_Template, 3, 0, \"li\", 10);\n        i0.ɵɵtemplate(13, AppComponent_li_13_Template, 3, 0, \"li\", 10);\n        i0.ɵɵtemplate(14, AppComponent_li_14_Template, 3, 0, \"li\", 10);\n        i0.ɵɵtemplate(15, AppComponent_li_15_Template, 3, 0, \"li\", 10);\n        i0.ɵɵtemplate(16, AppComponent_li_16_Template, 3, 0, \"li\", 10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(17, AppComponent_li_17_Template, 11, 0, \"li\", 11);\n        i0.ɵɵtemplate(18, AppComponent_li_18_Template, 3, 0, \"li\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"ul\", 12);\n        i0.ɵɵtemplate(20, AppComponent_li_20_Template, 3, 2, \"li\", 10);\n        i0.ɵɵelementStart(21, \"li\")(22, \"a\", 13);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_a_click_22_listener() {\n          return ctx.onLgout();\n        });\n        i0.ɵɵtemplate(23, AppComponent_span_23_Template, 2, 1, \"span\", 10);\n        i0.ɵɵelement(24, \"span\", 14);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵtemplate(25, AppComponent_div_25_Template, 2, 1, \"div\", 15);\n        i0.ɵɵelementStart(26, \"div\", 16);\n        i0.ɵɵelement(27, \"router-outlet\");\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated());\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isUser());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isUser());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isUser());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAdmin());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAdmin());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAdmin());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isAdmin() && ctx.isAuthenticated());\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isAdmin() && ctx.caddyService.getCurrentCaddy() && ctx.isAuthenticated());\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"title\", ctx.isAuthenticated() ? \"Logout\" : \"Login\")(\"ngClass\", ctx.isAuthenticated() ? \"glyphicon glyphicon-log-out\" : \"glyphicon glyphicon-log-in\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showingMode == 1 || ctx.showingMode == 2);\n      }\n    },\n    directives: [i6.NgIf, i5.RouterLinkWithHref, i6.NgClass, i6.NgForOf, i5.RouterOutlet],\n    styles: [\"._curseur[_ngcontent-%COMP%]{cursor:pointer}\"]\n  });\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}